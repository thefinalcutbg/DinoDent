CREATE TABLE practice (rzi VARCHAR NOT NULL PRIMARY KEY, name VARCHAR NOT NULL, bulstat VARCHAR NOT NULL, firm_address VARCHAR, practice_address VARCHAR, pass VARCHAR NOT NULL, legal_entity INT, vat VARCHAR, nzok_contract VARCHAR, priceList VARCHAR, settings VARCHAR)
CREATE TABLE doctor (lpk VARCHAR (9) NOT NULL PRIMARY KEY, pass VARCHAR NOT NULL, fname VARCHAR (50) NOT NULL, mname VARCHAR NOT NULL, lname VARCHAR (50) NOT NULL, phone VARCHAR NOT NULL, egn VARCHAR (10) NOT NULL, several_rhif INTEGER)
CREATE TABLE practice_doctor (practice_rzi VARCHAR NOT NULL REFERENCES practice ON DELETE CASCADE ON UPDATE CASCADE, doctor_lpk VARCHAR NOT NULL, admin BOOLEAN NOT NULL, specialty INT NOT NULL, FOREIGN KEY (doctor_lpk) REFERENCES doctor (lpk) ON DELETE CASCADE ON UPDATE CASCADE
CREATE TABLE patient (rowid INTEGER PRIMARY KEY, type INT NOT NULL, id VARCHAR (10) NOT NULL, birth VARCHAR (10) NOT NULL, sex BOOLEAN NOT NULL, fname VARCHAR (50) NOT NULL, mname VARCHAR (50), lname VARCHAR (50) NOT NULL, ekatte INT NOT NULL, address VARCHAR (100), hirbno VARCHAR (8), phone VARCHAR (20), allergies VARCHAR (400), currentDiseases VARCHAR (400), pastDiseases VARCHAR (400));
CREATE TABLE procedure (rowid INTEGER NOT NULL PRIMARY KEY, amblist_rowid INTEGER NOT NULL, date TEXT NOT NULL DEFAULT '1900-01-01', nzok INT NOT NULL, code VARCHAR (10) NOT NULL, ksmp VARCHAR (8) NOT NULL, type INT NOT NULL, tooth INT NOT NULL, deciduous INT NOT NULL, price REAL NOT NULL, data VARCHAR NOT NULL, FOREIGN KEY (amblist_rowid) REFERENCES amblist (rowid) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE financial (rowid INTEGER PRIMARY KEY, practice_rzi VARCHAR (10) NOT NULL REFERENCES practice (rzi) ON DELETE CASCADE ON UPDATE CASCADE, date TEXT NOT NULL DEFAULT '1900-01-01', num BIGINT NOT NULL, type INT NOT NULL, month_notif INT, recipient_id VARCHAR (100), recipient_name, recipient_phone VARCHAR (20), recipient_address, data TEXT NOT NULL)
CREATE TABLE periostatus (rowid INTEGER NOT NULL PRIMARY KEY, patient_rowid INTEGER NOT NULL REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE, date TEXT NOT NULL DEFAULT '1900-01-01', lpk VARCHAR (9) NOT NULL REFERENCES doctor (lpk) ON DELETE CASCADE ON UPDATE CASCADE, rzi VARCHAR (10) NOT NULL REFERENCES practice (rzi) ON DELETE CASCADE ON UPDATE CASCADE, data VARCHAR NOT NULL, FOREIGN KEY (patient_rowid) REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE note (patient_rowid INTEGER NOT NULL, tooth INT NOT NULL, text VARCHAR NOT NULL, PRIMARY KEY (patient_rowid, tooth), FOREIGN KEY (patient_rowid) REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE amblist (rowid INTEGER NOT NULL PRIMARY KEY, patient_rowid INTEGER NOT NULL, date TEXT NOT NULL DEFAULT ('1900-01-01T00:00:00'), num INT NOT NULL, lpk VARCHAR (9) NOT NULL REFERENCES doctor (lpk) ON DELETE CASCADE ON UPDATE CASCADE, nhif VARCHAR, rzi VARCHAR (10) REFERENCES practice (rzi) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL, status VARCHAR, FOREIGN KEY (patient_rowid) REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE)
PRAGMA user_version = 1